{"remainingRequest":"/Users/shantanusharma/Desktop/lumos/hackathon-website/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/shantanusharma/Desktop/lumos/hackathon-website/node_modules/gridsome/app/directives/link.js","dependencies":[{"path":"/Users/shantanusharma/Desktop/lumos/hackathon-website/node_modules/gridsome/app/directives/link.js","mtime":1659974164524},{"path":"/Users/shantanusharma/Desktop/lumos/hackathon-website/node_modules/cache-loader/dist/cjs.js","mtime":1659974166832},{"path":"/Users/shantanusharma/Desktop/lumos/hackathon-website/node_modules/babel-loader/lib/index.js","mtime":1659974167709}],"contextDependencies":[],"result":["import fetch from '../fetch';\nimport router from '../router';\nimport caniuse from '../utils/caniuse';\nimport { stripPathPrefix } from '../utils/helpers';\nimport { createObserver } from '../utils/intersectionObserver';\nconst isPreloaded = {};\nconst observer = caniuse.IntersectionObserver ? createObserver(intersectionHandler) : null;\nexport default {\n  inserted(el) {\n    observer && observer.observe(el);\n  },\n\n  unbind(el) {\n    observer && observer.unobserve(el);\n  }\n\n};\n\nfunction intersectionHandler({\n  intersectionRatio,\n  target\n}) {\n  if (process.isClient) {\n    if (intersectionRatio > 0) {\n      observer.unobserve(target);\n\n      if (document.location.hostname === target.hostname) {\n        if (isPreloaded[target.pathname]) return;else isPreloaded[target.pathname] = true;\n        const path = stripPathPrefix(target.pathname);\n        const {\n          route\n        } = router.resolve({\n          path\n        });\n        setTimeout(() => fetch(route, {\n          shouldPrefetch: true\n        }), 250);\n      }\n    }\n  }\n}",null]}